{
  "$schema": "http://json-schema.org/draft-07/schema#",
  "title": "ICF Assistant Priorities",
  "description": "Prioritized activities and emotional balance information for ICF projects",
  "type": "object",
  "required": ["last_updated", "time_window", "prioritized_activities", "emotional_balance"],
  "properties": {
    "last_updated": {
      "description": "Timestamp when the priorities were last updated",
      "type": "string",
      "format": "date-time"
    },
    "time_window": {
      "description": "Available time window in minutes (1440 represents a full day)",
      "type": "integer",
      "enum": [15, 30, 45, 90, 180, 1440]
    },
    "user_state": {
      "description": "Current user state assessment collected during /now command",
      "type": "object",
      "properties": {
        "energy_level": {
          "description": "Current energy level (1-5 scale)",
          "type": "integer",
          "minimum": 1,
          "maximum": 5
        },
        "focus_capacity": {
          "description": "Current focus capacity (1-5 scale)",
          "type": "integer",
          "minimum": 1,
          "maximum": 5
        },
        "stress_level": {
          "description": "Current stress level (1-5 scale)",
          "type": "integer",
          "minimum": 1,
          "maximum": 5
        },
        "constraints": {
          "description": "Any specific time or scheduling constraints",
          "type": "array",
          "items": {
            "type": "string"
          }
        },
        "notes": {
          "description": "Additional context or notes about current state",
          "type": "string"
        }
      }
    },
    "emotional_state": {
      "description": "Current emotional state assessment",
      "type": "object",
      "additionalProperties": {
        "type": "integer",
        "minimum": 1,
        "maximum": 5
      }
    },
    "prioritized_activities": {
      "description": "List of prioritized activities across projects",
      "type": "array",
      "items": {
        "type": "object",
        "required": ["project", "emotional_category", "step", "milestone", "estimated_time", "rationale", "status"],
        "properties": {
          "project": {
            "description": "Project name",
            "type": "string"
          },
          "emotional_category": {
            "description": "Emotional category for the project",
            "type": "string"
          },
          "step": {
            "description": "The specific step to work on",
            "type": "string"
          },
          "milestone": {
            "description": "The milestone containing this step",
            "type": "string"
          },
          "estimated_time": {
            "description": "Estimated time to complete in minutes",
            "type": "integer",
            "minimum": 1
          },
          "rationale": {
            "description": "Explanation for why this activity is prioritized",
            "type": "string"
          },
          "status": {
            "description": "Current status of the step",
            "type": "string",
            "enum": ["pending", "in_progress", "completed"]
          }
        }
      }
    },
    "emotional_balance": {
      "description": "Balance metrics for emotional categories",
      "type": "object",
      "additionalProperties": {
        "type": "object",
        "required": ["allocated_time", "recommended_time"],
        "properties": {
          "allocated_time": {
            "description": "Time allocated to this category in minutes",
            "type": "integer",
            "minimum": 0
          },
          "recommended_time": {
            "description": "Recommended time for this category in minutes",
            "type": "integer",
            "minimum": 0
          }
        }
      }
    }
  }
}